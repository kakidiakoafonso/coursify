import * as S from './styled'
import React, { useEffect, useState } from 'react'
import {useWindowDimensions} from 'react-native'
import { WebView } from 'react-native-webview';
import axios from 'axios'
import { useRoute } from '@react-navigation/native';
import api from '../../service/api';
import Spinner from '../../Component/Spinner/Spinner';

const defaultImage = "data:image/jpeg;base64,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"
export default function Detalhe() 
{
  const {postId} = useRoute().params
  
  const [imagem, setimagem] = useState(undefined)
  const [loading, setloading] = useState<boolean>(true)
  const [details, setdetails] = useState([])
    async function fetch ()
    {
        await api.get(`posts/${postId}`).
        then((response)=>{

          setdetails(response.data)
          console.log(response.data);
          setloading(false)    
        }).
        catch((error)=>{
          setloading(false)
          console.log(error);
          
          
        })          
    }

    useEffect(()=>fetch(),[])

    if(loading)  return <Spinner/>
    
  return (
    <S.Container>
        <S.TopContainer>
          <S.Title>{details.title.rendered}</S.Title>
        </S.TopContainer>
        <S.MessageContainer>
            <S.MessageWrapper>
              <WebView 
                showsVerticalScrollIndicator={false}
                style={{flex:1}}
                originWhitelist={['*']}
                
                source={{ html: details.content?.rendered || '<h1><center>Hello world</center></h1>' }}
              />
            </S.MessageWrapper>
        </S.MessageContainer>
    </S.Container>
  )
}